#################################################################################
### get the scrap rate from a statistical distribution in multiple dimensions ###
#################################################################################

from scipy.stats import norm
import matplotlib.pyplot as plt
import numpy as np

def RSS(X, Y, label:str = 'EOL') -> int:
    """
    EXPECT NORMAL DISTRIBUTION!!!
    :param X: steps in the EOL, default: [0.0, 0.25, 0.5, 0.75, 1.0, 1.25, 1.5, 1.75, 2.0, 2.25, 2.5, 2.75, 3.0, 3.25, 3.5, 3.75, 4.0, 4.25, 4.5, 4.75, 5.0, 5.25, 5.5, 5.75, 6.0, 6.25, 6.5, 6.75, 7.0, 7.25, 7.5, 7.75, 8.0, 8.25, 8.5, 8.75, 9.0, 9.25, 9.5, 9.75, 10.0, 10.25, 10.5, 10.75, 11.0, 11.25, 11.5, 11.75, 12.0, 12.25, 12.5, 12.75, 13.0, 13.25, 13.5, 13.75, 14.0, 14.25, 14.5, 14.75, 15.0, 15.25, 15.5, 15.75, 16.0, 16.25, 16.5, 16.75, 17.0, 17.25, 17.5, 17.75, 18.0, 18.25, 18.5, 18.75, 19.0, 19.25, 19.5, 19.75, 20.0, 20.25, 20.5, 20.75, 21.0, 21.25, 21.5, 21.75, 22.0, 22.25, 22.5, 22.75, 23.0, 23.25, 23.5, 23.75, 24.0, 24.25, 24.5, 24.75, 25.0, 25.25, 25.5, 25.75, 26.0, 26.25, 26.5, 26.75, 27.0, 27.25, 27.5, 27.75, 28.0, 28.25, 28.5, 28.75, 29.0, 29.25, 29.5, 29.75, 30.0, 30.25, 30.5, 30.75, 31.0, 31.25, 31.5, 31.75, 32.0, 32.25, 32.5, 32.75, 33.0, 33.25, 33.5, 33.75, 34.0, 34.25, 34.5, 34.75, 35.0, 35.25, 35.5, 35.75, 36.0, 36.25, 36.5, 36.75, 37.0, 37.25, 37.5, 37.75, 38.0, 38.25, 38.5, 38.75, 39.0, 39.25, 39.5, 39.75, 40.0, 40.25, 40.5, 40.75, 41.0, 41.25, 41.5, 41.75, 42.0, 42.25, 42.5, 42.75, 43.0, 43.25, 43.5, 43.75, 44.0, 44.25, 44.5, 44.75, 45.0, 45.25, 45.5, 45.75, 46.0, 46.25, 46.5, 46.75, 47.0, 47.25, 47.5, 47.75, 48.0, 48.25, 48.5, 48.75, 49.0, 49.25, 49.5, 49.75, 50.0, 50.25, 50.5, 50.75, 51.0, 51.25, 51.5, 51.75, 52.0, 52.25, 52.5, 52.75, 53.0, 53.25, 53.5, 53.75, 54.0, 54.25, 54.5, 54.75, 55.0, 55.25, 55.5, 55.75, 56.0, 56.25, 56.5, 56.75, 57.0, 57.25, 57.5, 57.75, 58.0, 58.25, 58.5, 58.75, 59.0, 59.25, 59.5, 59.75, 60.0, 60.25, 60.5, 60.75, 61.0, 61.25, 61.5, 61.75, 62.0, 62.25, 62.5, 62.75, 63.0, 63.25, 63.5, 63.75, 64.0, 64.25, 64.5, 64.75, 65.0, 65.25, 65.5, 65.75, 66.0, 66.25, 66.5, 66.75, 67.0, 67.25, 67.5, 67.75, 68.0, 68.25, 68.5, 68.75, 69.0, 69.25, 69.5, 69.75, 70.0, 70.25, 70.5, 70.75, 71.0, 71.25, 71.5, 71.75, 72.0, 72.25, 72.5, 72.75, 73.0, 73.25, 73.5, 73.75, 74.0, 74.25, 74.5, 74.75, 75.0, 75.25, 75.5, 75.75, 76.0, 76.25, 76.5, 76.75, 77.0, 77.25, 77.5, 77.75, 78.0, 78.25, 78.5, 78.75, 79.0, 79.25, 79.5, 79.75, 80.0, 80.25, 80.5, 80.75, 81.0, 81.25, 81.5, 81.75, 82.0, 82.25, 82.5, 82.75, 83.0, 83.25, 83.5, 83.75, 84.0, 84.25, 84.5, 84.75, 85.0, 85.25, 85.5, 85.75, 86.0, 86.25, 86.5, 86.75, 87.0, 87.25, 87.5, 87.75, 88.0, 88.25, 88.5, 88.75, 89.0, 89.25, 89.5, 89.75, 90.0, 90.25, 90.5, 90.75, 91.0, 91.25, 91.5, 91.75, 92.0, 92.25, 92.5, 92.75, 93.0, 93.25, 93.5, 93.75, 94.0, 94.25, 94.5, 94.75, 95.0, 95.25, 95.5, 95.75, 96.0, 96.25, 96.5, 96.75, 97.0, 97.25, 97.5, 97.75, 98.0, 98.25, 98.5, 98.75, 99.0, 99.25, 99.5, 99.75, 100.0, 100.25, 100.5, 100.75, 101.0, 101.25, 101.5, 101.75, 102.0, 102.25, 102.5, 102.75, 103.0, 103.25, 103.5, 103.75, 104.0, 104.25, 104.5, 104.75, 105.0, 105.25, 105.5, 105.75, 106.0, 106.25, 106.5, 106.75, 107.0, 107.25, 107.5, 107.75, 108.0, 108.25, 108.5, 108.75, 109.0, 109.25, 109.5, 109.75, 110.0, 110.25, 110.5, 110.75, 111.0, 111.25, 111.5, 111.75, 112.0, 112.25, 112.5, 112.75, 113.0, 113.25, 113.5, 113.75, 114.0, 114.25, 114.5, 114.75, 115.0, 115.25, 115.5, 115.75, 116.0, 116.25, 116.5, 116.75, 117.0, 117.25, 117.5, 117.75, 118.0, 118.25, 118.5, 118.75, 119.0, 119.25, 119.5, 119.75, 120.0, 120.25, 120.5, 120.75, 121.0, 121.25, 121.5, 121.75, 122.0, 122.25, 122.5, 122.75, 123.0, 123.25, 123.5, 123.75, 124.0, 124.25, 124.5, 124.75, 125.0, 125.25, 125.5, 125.75, 126.0, 126.25, 126.5, 126.75, 127.0, 127.25, 127.5, 127.75, 128.0, 128.25, 128.5, 128.75, 129.0, 129.25, 129.5, 129.75, 130.0, 130.25, 130.5, 130.75, 131.0, 131.25, 131.5, 131.75, 132.0, 132.25, 132.5, 132.75, 133.0, 133.25, 133.5, 133.75, 134.0, 134.25, 134.5, 134.75, 135.0, 135.25, 135.5, 135.75, 136.0, 136.25, 136.5, 136.75, 137.0, 137.25, 137.5, 137.75, 138.0, 138.25, 138.5, 138.75, 139.0, 139.25, 139.5, 139.75, 140.0, 140.25, 140.5, 140.75, 141.0, 141.25, 141.5, 141.75, 142.0, 142.25, 142.5, 142.75, 143.0, 143.25, 143.5, 143.75, 144.0, 144.25, 144.5, 144.75, 145.0, 145.25, 145.5, 145.75, 146.0, 146.25, 146.5, 146.75, 147.0, 147.25, 147.5, 147.75, 148.0, 148.25, 148.5, 148.75, 149.0, 149.25, 149.5, 149.75, 150.0, 150.25, 150.5, 150.75, 151.0, 151.25, 151.5, 151.75, 152.0, 152.25, 152.5, 152.75, 153.0, 153.25, 153.5, 153.75, 154.0, 154.25, 154.5, 154.75, 155.0, 155.25, 155.5, 155.75, 156.0, 156.25, 156.5, 156.75, 157.0, 157.25, 157.5, 157.75, 158.0, 158.25, 158.5, 158.75, 159.0, 159.25, 159.5, 159.75, 160.0, 160.25, 160.5, 160.75, 161.0, 161.25, 161.5, 161.75, 162.0, 162.25, 162.5, 162.75, 163.0, 163.25, 163.5, 163.75, 164.0, 164.25, 164.5, 164.75, 165.0, 165.25, 165.5, 165.75, 166.0, 166.25, 166.5, 166.75, 167.0, 167.25, 167.5, 167.75, 168.0, 168.25, 168.5, 168.75, 169.0, 169.25, 169.5, 169.75, 170.0, 170.25, 170.5, 170.75, 171.0, 171.25, 171.5, 171.75, 172.0, 172.25, 172.5, 172.75, 173.0, 173.25, 173.5, 173.75, 174.0, 174.25, 174.5, 174.75, 175.0, 175.25, 175.5, 175.75, 176.0, 176.25, 176.5, 176.75, 177.0, 177.25, 177.5, 177.75, 178.0, 178.25, 178.5, 178.75, 179.0, 179.25, 179.5, 179.75, 180.0, 180.25, 180.5, 180.75, 181.0, 181.25, 181.5, 181.75, 182.0, 182.25, 182.5, 182.75, 183.0, 183.25, 183.5, 183.75, 184.0, 184.25, 184.5, 184.75, 185.0, 185.25, 185.5, 185.75, 186.0, 186.25, 186.5, 186.75, 187.0, 187.25, 187.5, 187.75, 188.0, 188.25, 188.5, 188.75, 189.0, 189.25, 189.5, 189.75, 190.0, 190.25, 190.5, 190.75, 191.0, 191.25, 191.5, 191.75, 192.0, 192.25, 192.5, 192.75, 193.0, 193.25, 193.5, 193.75, 194.0, 194.25, 194.5, 194.75, 195.0, 195.25, 195.5, 195.75, 196.0, 196.25, 196.5, 196.75, 197.0, 197.25, 197.5, 197.75, 198.0, 198.25, 198.5, 198.75, 199.0, 199.25, 199.5, 199.75, 200.0, 200.25, 200.5, 200.75, 201.0, 201.25, 201.5, 201.75, 202.0, 202.25, 202.5, 202.75, 203.0, 203.25, 203.5, 203.75, 204.0, 204.25, 204.5, 204.75, 205.0, 205.25, 205.5, 205.75, 206.0, 206.25, 206.5, 206.75, 207.0, 207.25, 207.5, 207.75, 208.0, 208.25, 208.5, 208.75, 209.0, 209.25, 209.5, 209.75, 210.0, 210.25, 210.5, 210.75, 211.0, 211.25, 211.5, 211.75, 212.0, 212.25, 212.5, 212.75, 213.0, 213.25, 213.5, 213.75, 214.0, 214.25, 214.5, 214.75, 215.0, 215.25, 215.5, 215.75, 216.0, 216.25, 216.5, 216.75, 217.0, 217.25, 217.5, 217.75, 218.0, 218.25, 218.5, 218.75, 219.0, 219.25, 219.5, 219.75, 220.0, 220.25, 220.5, 220.75, 221.0, 221.25, 221.5, 221.75, 222.0, 222.25, 222.5, 222.75, 223.0, 223.25, 223.5, 223.75, 224.0, 224.25, 224.5, 224.75, 225.0, 225.25, 225.5, 225.75, 226.0, 226.25, 226.5, 226.75, 227.0, 227.25, 227.5, 227.75, 228.0, 228.25, 228.5, 228.75, 229.0, 229.25, 229.5, 229.75, 230.0, 230.25, 230.5, 230.75, 231.0, 231.25, 231.5, 231.75, 232.0, 232.25, 232.5, 232.75, 233.0, 233.25, 233.5, 233.75, 234.0, 234.25, 234.5, 234.75, 235.0, 235.25, 235.5, 235.75, 236.0, 236.25, 236.5, 236.75, 237.0, 237.25, 237.5, 237.75, 238.0, 238.25, 238.5, 238.75, 239.0, 239.25, 239.5, 239.75, 240.0, 240.25, 240.5, 240.75, 241.0, 241.25, 241.5, 241.75, 242.0, 242.25, 242.5, 242.75, 243.0, 243.25, 243.5, 243.75, 244.0, 244.25, 244.5, 244.75, 245.0, 245.25, 245.5, 245.75, 246.0, 246.25, 246.5, 246.75, 247.0, 247.25, 247.5, 247.75, 248.0, 248.25, 248.5, 248.75, 249.0, 249.25, 249.5, 249.75, 250.0, 250.25, 250.5, 250.75, 251.0, 251.25, 251.5, 251.75, 252.0, 252.25, 252.5, 252.75, 253.0, 253.25, 253.5, 253.75, 254.0, 254.25, 254.5, 254.75, 255.0, 255.25, 255.5, 255.75]
    :param Y: predicted EOL data
    :param label:
    :return:
    """

    # first plot the data

    # for testing create some sample data
    test:list = [83.993484,  91.47783,  88.599236,  83.993484,  98.67431,  90.03853,  85.43278,  92.91712,  90.90211,  82.554184,  84.85706,  86.58422,  84.5692,  90.03853,  99.825745,  94.06856,  96.94715,  92.3414,  90.326385,  90.03853,  91.765686,  89.462814,  88.88709,  89.75067,  90.326385,  89.75067,  90.90211,  91.189964,  91.47783,  100.97719,  88.02351,  87.159935,  85.43278,  89.75067,  88.599236,  91.47783,  88.599236,  97.81073,  88.599236,  92.91712,  93.20499,  92.05354,  93.7807,  102.9922,  90.61425,  85.72064,  86.0085,  86.0085,  96.659294,  86.87208,  85.14492,  89.17495,  92.3414,  85.72064,  86.29636,  87.73566,  88.599236,  84.28134,  90.03853,  87.159935,  83.993484,  89.75067,  87.73566,  88.88709,  89.462814,  87.159935,  84.5692,  87.159935,  88.31137,  87.159935,  86.29636,  86.58422,  92.05354,  89.17495,  89.462814,  87.4478,  93.49284,  87.4478,  84.85706,  92.05354,  94.93214,  86.0085,  87.4478,  88.31137,  81.69061,  87.159935,  88.599236,  87.73566,  87.73566,  85.72064,  86.0085,  86.87208,  90.03853,  86.58422,  84.85706,  85.72064,  93.20499,  80.827034,  83.41776,  87.73566,  114.21871,  90.03853,  92.05354,  93.7807,  90.61425,  88.88709,  88.88709,  88.02351,  89.17495,  88.02351,  89.75067,  92.3414,  87.73566,  88.31137,  86.58422,  90.61425,  92.91712,  89.17495,  88.31137,  87.73566,  94.06856,  86.0085,  87.73566,  87.159935,  90.90211,  88.31137,  88.31137,  88.02351,  88.599236,  90.03853,  89.75067,  87.73566,  89.17495,  91.765686,  88.02351,  87.73566,  86.58422,  88.31137,  89.17495,  90.90211,  87.159935,  87.73566,  86.58422,  89.462814,  95.50786,  88.88709,  89.75067,  90.61425,  95.795715,  90.90211,  91.47783,  93.49284,  88.02351,  88.88709,  85.72064,  89.462814,  98.67431,  87.159935,  88.02351,  91.47783,  97.235016,  92.05354,  90.61425,  91.189964,  89.17495,  89.462814,  90.90211,  90.90211,  90.61425,  92.05354,  89.17495,  89.17495,  91.765686,  90.90211,  90.61425,  89.75067,  89.462814,  89.75067,  91.47783,  91.765686,  94.64428,  89.17495,  89.75067,  88.599236,  89.462814,  91.765686,  92.3414,  95.50786,  96.37144,  88.599236,  90.326385,  87.73566,  98.962166,  94.356415,  95.50786,  91.189964,  95.50786,  91.765686,  94.356415,  98.67431,  115.08229,  91.47783,  97.235016,  90.61425,  100.97719,  94.64428,  94.356415,  95.50786,  98.962166,  90.90211,  95.50786,  97.235016,  94.64428,  87.4478,  86.29636,  91.47783,  97.52287,  98.962166,  94.93214,  92.629265,  105.295074,  92.91712,  90.326385,  89.75067,  92.629265,  96.37144,  94.93214,  95.22,  98.38645,  96.659294,  94.356415,  98.67431,  100.40147,  90.03853,  92.629265,  98.962166,  100.40147,  90.90211,  91.47783,  92.629265,  99.25003,  94.64428,  93.7807,  95.50786,  100.1136,  94.64428,  91.47783,  93.49284,  100.68932,  91.47783,  91.47783,  90.90211,  104.431496,  99.25003,  97.235016,  98.962166,  103.28006,  106.44651,  104.431496,  107.597946,  111.91583,  96.659294,  96.37144,  101.84076,  104.431496,  99.825745,  93.49284,  96.08357,  100.1136,  97.81073,  94.356415,  94.93214,  99.825745,  97.81073,  108.461525,  103.855774,  109.61296,  99.25003,  100.40147,  96.37144,  103.56792,  96.37144,  97.52287,  101.265045,  105.87079,  92.91712,  100.1136,  97.52287,  106.15865,  106.15865,  102.12862,  103.855774,  109.61296,  101.265045,  99.53789,  105.58293,  110.18868,  111.627975,  107.02223,  107.02223,  129.1874,  101.84076,  108.17367,  110.764404,  108.461525,  105.58293,  102.41648,  105.295074,  117.67302,  96.94715,  98.67431,  97.52287,  106.15865,  102.9922,  104.14364,  107.8858,  105.295074,  107.02223,  108.461525,  108.17367,  107.02223,  108.17367,  108.74939,  109.61296,  109.90082,  111.91583,  113.35513,  115.37015,  120.55162,  117.097305,  121.41519,  128.03596,  148.76184,  126.88452,  120.83948,  116.23373,  126.596664,  113.35513,  111.34012,  110.764404,  120.26376,  109.90082,  107.8858,  108.17367,  110.764404,  107.02223,  106.73437,  103.855774,  102.12862,  105.295074,  101.265045,  100.68932,  108.461525,  102.41648,  102.41648,  101.265045,  115.08229,  105.00722,  101.84076,  103.28006,  114.21871,  98.09859,  97.235016,  98.09859,  109.03725,  97.52287,  97.235016,  96.37144,  100.68932,  100.40147,  99.25003,  98.67431,  107.31009,  96.94715,  95.795715,  98.38645,  99.825745,  99.53789,  99.25003,  94.93214,  107.8858,  98.962166,  97.81073,  101.5529,  99.825745,  94.64428,  93.49284,  94.06856,  102.12862,  94.356415,  92.629265,  96.659294,  106.73437,  98.38645,  94.356415,  101.265045,  106.73437,  105.58293,  105.58293,  105.00722,  126.30881,  97.52287,  95.50786,  96.08357,  106.15865,  102.12862,  89.75067,  93.7807,  108.461525,  100.97719,  95.22,  97.235016,  100.1136,  103.28006,  96.659294,  99.25003,  105.295074,  100.1136,  101.5529,  104.431496,  107.31009,  102.9922,  94.356415,  98.962166,  114.21871,  92.629265,  90.90211,  101.265045,  107.597946,  96.659294,  98.09859,  97.235016,  106.15865,  101.5529,  102.41648,  101.265045,  110.47654,  92.629265,  98.38645,  105.87079,  108.74939,  105.00722,  99.53789,  109.03725,  107.02223,  103.28006,  98.09859,  101.5529,  112.2037,  104.431496,  103.855774,  106.73437,  111.627975,  102.9922,  105.295074,  108.74939,  118.24874,  108.17367,  100.97719,  110.18868,  113.067276,  110.18868,  108.461525,  109.03725,  109.3251,  101.265045,  98.67431,  106.15865,  120.83948,  113.35513,  99.825745,  103.855774,  110.764404,  111.91583,  101.84076,  109.3251,  114.79443,  106.73437,  103.855774,  106.44651,  114.21871,  109.3251,  101.265045,  102.12862,  112.49156,  101.265045,  98.962166,  98.962166,  103.855774,  93.7807,  94.06856,  96.08357,  107.31009,  100.68932,  101.5529,  100.97719,  105.87079,  97.81073,  100.68932,  105.87079,  120.83948,  111.627975,  105.58293,  100.40147,  113.067276,  109.3251,  101.84076,  107.8858,  113.64299,  105.58293,  99.53789,  101.84076,  110.47654,  104.14364,  94.64428,  98.38645,  114.50658,  112.2037,  110.47654,  118.82446,  114.50658,  107.31009,  104.14364,  100.97719,  120.26376,  104.14364,  102.12862,  104.431496,  109.03725,  104.71935,  106.15865,  108.74939,  109.03725,  107.31009,  94.64428,  101.265045,  118.24874,  104.71935,  106.15865,  107.31009,  114.21871,  105.00722,  107.31009,  109.90082,  111.627975,  109.61296,  101.5529,  105.58293,  116.23373,  109.61296,  104.431496,  107.02223,  115.08229,  102.12862,  102.12862,  107.8858,  118.24874,  109.90082,  105.58293,  107.597946,  119.688034,  108.461525,  108.461525,  104.14364,  109.03725,  110.764404,  102.70434,  107.02223,  119.11232,  102.70434,  100.1136,  110.764404,  111.34012,  104.431496,  102.70434,  111.627975,  112.77942,  112.77942,  104.14364,  109.90082,  121.70306,  110.47654,  107.31009,  105.00722,  116.23373,  111.34012,  106.44651,  112.2037,  113.930855,  114.21871,  107.597946,  111.05226,  115.94587,  108.461525,  104.71935,  107.8858,  117.960884,  106.44651,  101.5529,  106.44651,  112.77942,  103.855774,  111.34012,  112.2037,  115.94587,  106.73437,  101.84076,  109.03725,  115.658005,  107.02223,  104.71935,  105.295074,  114.50658,  102.9922,  102.41648,  106.73437,  118.24874,  102.12862,  97.81073,  94.356415,  109.3251,  105.295074,  97.52287,  100.68932,  113.64299,  99.53789,  101.265045,  106.15865,  115.94587,  113.930855,  102.12862,  106.44651,  112.49156,  98.38645,  96.37144,  94.64428,  112.77942,  105.00722,  100.40147,  94.64428,  111.05226,  103.855774,  100.68932,  107.31009,  111.91583,  103.56792,  90.90211,  94.06856,  110.18868,  100.1136,  102.41648,  101.5529,  112.49156,  96.37144,  92.05354,  98.09859,  112.2037,  98.67431,  100.68932,  100.97719,  115.37015,  100.97719,  102.41648,  111.627975,  126.02094,  108.74939,  104.71935,  109.61296,  113.64299,  105.295074,  95.50786,  96.37144,  112.77942,  95.22,  93.49284,  95.22,  111.627975,  98.962166,  100.40147,  100.97719,  113.067276,  94.06856,  98.09859,  101.84076,  112.2037,  104.431496,  93.7807,  96.94715,  112.49156,  107.597946,  99.825745,  97.52287,  115.08229,  112.2037,  103.28006,  103.56792,  113.067276,  100.1136,  103.855774,  108.461525,  111.91583,  102.70434,  98.962166,  112.77942,  110.47654,  107.31009,  100.68932,  105.87079,  119.40018,  107.31009,  107.597946,  111.05226,  113.35513,  111.91583,  110.18868,  109.90082,  124.86951,  108.17367,  107.02223,  107.31009,  117.38516,  110.18868,  105.58293,  100.68932,  111.05226,  105.295074,  102.9922,  107.31009,  121.41519,  109.03725,  102.12862,  106.73437,  110.18868,  107.31009,  98.67431,  105.58293,  115.08229,  105.295074,  101.5529,  100.68932,  113.930855,  99.825745,  99.25003,  99.25003,  113.64299,  101.84076,  102.41648,  100.68932,  111.05226,  108.74939,  99.25003,  105.87079,  116.52159,  97.235016,  101.265045,  106.44651,  110.764404,  99.53789,  100.97719,  107.8858,  111.627975,  112.77942,  100.97719,  106.73437,  112.49156,  105.00722,  94.06856,  98.962166,  113.64299,  107.02223,  100.97719,  104.431496,  114.79443,  99.53789,  102.12862,  104.14364,  110.18868,  100.1136,  94.64428,  102.9922,  108.17367,  102.9922,  101.84076,  98.38645,  111.05226,  94.64428,  99.25003,  98.67431,  110.764404,  105.87079,  98.67431,  101.265045,  110.764404,  100.40147,  101.5529,  104.14364,  113.930855,  100.68932,  98.67431,  102.70434,  106.73437,  101.265045,  98.67431,  104.14364,  110.18868,  100.1136,  93.49284,  98.67431,  109.3251,  100.97719,  97.52287,  98.09859,  107.31009,  95.50786,  88.88709,  96.37144,  110.18868,  91.47783,  92.05354,  101.5529,  114.79443,  108.74939,  96.94715,  102.70434,  111.627975,  101.265045,  95.795715,  95.795715,  105.00722,  91.765686,  89.462814,  90.90211,  105.58293,  96.659294,  94.06856,  102.12862,  109.61296,  100.68932,  96.94715,  96.08357,  105.87079,  89.75067,  94.356415,  99.53789,  103.855774,  100.1136,  92.3414,  93.49284,  109.03725,  89.462814,  86.0085,  95.50786,  109.3251,  92.629265,  92.05354,  88.599236,  105.58293,  92.05354,  87.159935,  87.73566,  103.28006,  90.90211,  91.47783,  90.03853,  110.47654,  96.94715,  92.91712,  90.03853,  108.461525,  90.03853,  86.58422,  93.20499,  103.56792,  99.25003,  95.795715,  88.88709,  104.14364,  92.3414,  89.17495,  96.659294,  101.84076,  88.88709,  84.5692,  90.03853,  103.855774,  88.02351,  88.31137,  88.88709,  106.44651,  86.0085,  86.29636,  87.4478,  99.53789,  89.462814,  86.58422,  84.85706,  96.37144,  83.993484,  85.14492,  93.7807,  98.962166,  82.26633,  81.69061,  82.26633,  98.67431,  85.14492,  82.26633,  84.5692,  97.81073,  83.70563,  83.70563,  81.69061,  100.40147,  83.41776,  80.25131,  79.67559,  100.40147,  83.70563,  79.963455,  85.14492,  96.08357,  80.53917,  88.02351,  95.795715,  101.84076,  94.93214,  89.17495,  91.189964,  93.20499,  84.85706,  77.94844,  87.159935,  94.06856,  77.94844,  75.933426,  82.26633,  92.3414,  88.599236,  82.84205,  83.70563,  96.94715,  85.14492,  80.53917,  81.11489,  91.47783,  79.09988,  77.94844,  75.357704,  89.462814,  85.43278,  82.84205,  81.11489,  97.235016,  80.25131,  79.09988,  79.09988,  86.29636,  79.38773,  77.37272,  78.81202,  91.47783,  82.84205,  80.827034,  83.70563,  90.90211,  85.43278,  78.2363,  77.08486,  90.326385,  82.26633,  76.797,  76.22128,  85.72064,  84.28134,  77.08486,  86.29636,  88.31137,  75.357704,  77.660576,  75.933426,  89.462814,  76.50914,  77.08486,  76.22128,  86.87208,  78.2363,  76.22128,  76.50914,  81.40275,  75.64556,  75.933426,  75.64556,  82.84205,  76.797,  75.64556,  83.129906,  91.47783,  82.26633,  80.25131,  79.38773,  82.554184,  78.2363,  76.50914,  76.22128,  77.37272,  76.50914,  76.22128,  77.94844,  76.50914,  76.22128,  75.933426,  77.94844,  77.37272,  76.797,  76.22128,  76.50914,  80.25131,  76.22128,  76.22128,  76.22128,  77.08486,  75.933426,  76.22128,  77.660576]
    x_test = np.array(test).reshape(1, -1)
    x_test = np.rint(x_test)
    x_test_mean = np.mean(x_test, axis=1)
    x_test_std = np.std(x_test, axis=1)

    # use data given as function input
    X = np.array(X).reshape(1, -1)
    X = np.rint(X)
    X_mean = np.mean(X, axis=1)
    X_std = np.std(X, axis=1)


    tol:int = 2

    # plot data as histogram to get a feeling for distribution type
    num_bins = 'auto' # define number of bins for histogram, auto: automatisch
    print("x_test: ", x_test)
    _ = plt.hist(x_test[0], num_bins, facecolor='blue')
    plt.show()

    # plot the normal distribution assumption to compare with histogram
    x_axis = np.arange(x_test.min(), x_test.max(), 0.1)
    y = norm.pdf(x_axis, x_test_mean[0], x_test_std[0])
    plt.plot(x_axis, y, label='normal distr')

    tol:float = 31.5
    scrap_rate = 1 - (norm.cdf(x_test_mean+tol, x_test_mean, x_test_std) - 0.5) *2
    print("scrap_rate: ", scrap_rate)
    plt.legend()
    plt.show()


    # creating an array of values between
    # -10 to 10 with a difference of 0.1
    x = np.arange(-10, 10, 0.1)

    y = norm.pdf(x, 0, 2)

    plt.plot(x, y, label='normal distr')

    y = norm.cdf(x, 0, 2)

    plt.plot(x, y, label='commulative normal distr')


    # so lets think again about scrap rate
    # EXCEL REFERENCE: 1-(NORMDIST(MEAN + TOL, MEAN, STD) -0.5)*2
    # so first the 1-:


    tol = 2
    y = 1 - norm.cdf(x+tol, 0, 2)

    plt.plot(x, y, label='1 - normal distr - tol 1')


    y = 1 - (norm.cdf(x+tol, 0, 2) - 0.5) *2

    plt.plot(x, y, label='full formular - tol 1')

    Wert = 0
    tol = 2
    print(f"TOL von {tol}: ", 1 - (norm.cdf(Wert+tol, 0, 2) - 0.5) *2)
    tol = 3
    print(f"TOL von {tol}: ", 1 - (norm.cdf(Wert+tol, 0, 2) - 0.5) *2)
    tol = 4
    print(f"TOL von {tol}: ", 1 - (norm.cdf(Wert+tol, 0, 2) - 0.5) *2)


    plt.legend()
    plt.show()


    tol = 2
    y = 1 - (norm.cdf(x+tol, 0, 2) - 0.5) *2
    plt.plot(x, y, label='full formular - tol 2')

    tol = 3
    y = 1 - (norm.cdf(x+tol, 0, 2) - 0.5) *2
    plt.plot(x, y, label='full formular - tol 3')

    tol = 4
    y = 1 - (norm.cdf(x+tol, 0, 2) - 0.5) *2
    plt.plot(x, y, label='full formular - tol 4')

    plt.legend()
    plt.show()

    scrap_rate = 1

    return scrap_rate

if __name__ == '__main__':
    test:list = [83.993484,  91.47783,  88.599236,  83.993484,  98.67431,  90.03853,  85.43278,  92.91712,  90.90211,  82.554184,  84.85706,  86.58422,  84.5692,  90.03853,  99.825745,  94.06856,  96.94715,  92.3414,  90.326385,  90.03853,  91.765686,  89.462814,  88.88709,  89.75067,  90.326385,  89.75067,  90.90211,  91.189964,  91.47783,  100.97719,  88.02351,  87.159935,  85.43278,  89.75067,  88.599236,  91.47783,  88.599236,  97.81073,  88.599236,  92.91712,  93.20499,  92.05354,  93.7807,  102.9922,  90.61425,  85.72064,  86.0085,  86.0085,  96.659294,  86.87208,  85.14492,  89.17495,  92.3414,  85.72064,  86.29636,  87.73566,  88.599236,  84.28134,  90.03853,  87.159935,  83.993484,  89.75067,  87.73566,  88.88709,  89.462814,  87.159935,  84.5692,  87.159935,  88.31137,  87.159935,  86.29636,  86.58422,  92.05354,  89.17495,  89.462814,  87.4478,  93.49284,  87.4478,  84.85706,  92.05354,  94.93214,  86.0085,  87.4478,  88.31137,  81.69061,  87.159935,  88.599236,  87.73566,  87.73566,  85.72064,  86.0085,  86.87208,  90.03853,  86.58422,  84.85706,  85.72064,  93.20499,  80.827034,  83.41776,  87.73566,  114.21871,  90.03853,  92.05354,  93.7807,  90.61425,  88.88709,  88.88709,  88.02351,  89.17495,  88.02351,  89.75067,  92.3414,  87.73566,  88.31137,  86.58422,  90.61425,  92.91712,  89.17495,  88.31137,  87.73566,  94.06856,  86.0085,  87.73566,  87.159935,  90.90211,  88.31137,  88.31137,  88.02351,  88.599236,  90.03853,  89.75067,  87.73566,  89.17495,  91.765686,  88.02351,  87.73566,  86.58422,  88.31137,  89.17495,  90.90211,  87.159935,  87.73566,  86.58422,  89.462814,  95.50786,  88.88709,  89.75067,  90.61425,  95.795715,  90.90211,  91.47783,  93.49284,  88.02351,  88.88709,  85.72064,  89.462814,  98.67431,  87.159935,  88.02351,  91.47783,  97.235016,  92.05354,  90.61425,  91.189964,  89.17495,  89.462814,  90.90211,  90.90211,  90.61425,  92.05354,  89.17495,  89.17495,  91.765686,  90.90211,  90.61425,  89.75067,  89.462814,  89.75067,  91.47783,  91.765686,  94.64428,  89.17495,  89.75067,  88.599236,  89.462814,  91.765686,  92.3414,  95.50786,  96.37144,  88.599236,  90.326385,  87.73566,  98.962166,  94.356415,  95.50786,  91.189964,  95.50786,  91.765686,  94.356415,  98.67431,  115.08229,  91.47783,  97.235016,  90.61425,  100.97719,  94.64428,  94.356415,  95.50786,  98.962166,  90.90211,  95.50786,  97.235016,  94.64428,  87.4478,  86.29636,  91.47783,  97.52287,  98.962166,  94.93214,  92.629265,  105.295074,  92.91712,  90.326385,  89.75067,  92.629265,  96.37144,  94.93214,  95.22,  98.38645,  96.659294,  94.356415,  98.67431,  100.40147,  90.03853,  92.629265,  98.962166,  100.40147,  90.90211,  91.47783,  92.629265,  99.25003,  94.64428,  93.7807,  95.50786,  100.1136,  94.64428,  91.47783,  93.49284,  100.68932,  91.47783,  91.47783,  90.90211,  104.431496,  99.25003,  97.235016,  98.962166,  103.28006,  106.44651,  104.431496,  107.597946,  111.91583,  96.659294,  96.37144,  101.84076,  104.431496,  99.825745,  93.49284,  96.08357,  100.1136,  97.81073,  94.356415,  94.93214,  99.825745,  97.81073,  108.461525,  103.855774,  109.61296,  99.25003,  100.40147,  96.37144,  103.56792,  96.37144,  97.52287,  101.265045,  105.87079,  92.91712,  100.1136,  97.52287,  106.15865,  106.15865,  102.12862,  103.855774,  109.61296,  101.265045,  99.53789,  105.58293,  110.18868,  111.627975,  107.02223,  107.02223,  129.1874,  101.84076,  108.17367,  110.764404,  108.461525,  105.58293,  102.41648,  105.295074,  117.67302,  96.94715,  98.67431,  97.52287,  106.15865,  102.9922,  104.14364,  107.8858,  105.295074,  107.02223,  108.461525,  108.17367,  107.02223,  108.17367,  108.74939,  109.61296,  109.90082,  111.91583,  113.35513,  115.37015,  120.55162,  117.097305,  121.41519,  128.03596,  148.76184,  126.88452,  120.83948,  116.23373,  126.596664,  113.35513,  111.34012,  110.764404,  120.26376,  109.90082,  107.8858,  108.17367,  110.764404,  107.02223,  106.73437,  103.855774,  102.12862,  105.295074,  101.265045,  100.68932,  108.461525,  102.41648,  102.41648,  101.265045,  115.08229,  105.00722,  101.84076,  103.28006,  114.21871,  98.09859,  97.235016,  98.09859,  109.03725,  97.52287,  97.235016,  96.37144,  100.68932,  100.40147,  99.25003,  98.67431,  107.31009,  96.94715,  95.795715,  98.38645,  99.825745,  99.53789,  99.25003,  94.93214,  107.8858,  98.962166,  97.81073,  101.5529,  99.825745,  94.64428,  93.49284,  94.06856,  102.12862,  94.356415,  92.629265,  96.659294,  106.73437,  98.38645,  94.356415,  101.265045,  106.73437,  105.58293,  105.58293,  105.00722,  126.30881,  97.52287,  95.50786,  96.08357,  106.15865,  102.12862,  89.75067,  93.7807,  108.461525,  100.97719,  95.22,  97.235016,  100.1136,  103.28006,  96.659294,  99.25003,  105.295074,  100.1136,  101.5529,  104.431496,  107.31009,  102.9922,  94.356415,  98.962166,  114.21871,  92.629265,  90.90211,  101.265045,  107.597946,  96.659294,  98.09859,  97.235016,  106.15865,  101.5529,  102.41648,  101.265045,  110.47654,  92.629265,  98.38645,  105.87079,  108.74939,  105.00722,  99.53789,  109.03725,  107.02223,  103.28006,  98.09859,  101.5529,  112.2037,  104.431496,  103.855774,  106.73437,  111.627975,  102.9922,  105.295074,  108.74939,  118.24874,  108.17367,  100.97719,  110.18868,  113.067276,  110.18868,  108.461525,  109.03725,  109.3251,  101.265045,  98.67431,  106.15865,  120.83948,  113.35513,  99.825745,  103.855774,  110.764404,  111.91583,  101.84076,  109.3251,  114.79443,  106.73437,  103.855774,  106.44651,  114.21871,  109.3251,  101.265045,  102.12862,  112.49156,  101.265045,  98.962166,  98.962166,  103.855774,  93.7807,  94.06856,  96.08357,  107.31009,  100.68932,  101.5529,  100.97719,  105.87079,  97.81073,  100.68932,  105.87079,  120.83948,  111.627975,  105.58293,  100.40147,  113.067276,  109.3251,  101.84076,  107.8858,  113.64299,  105.58293,  99.53789,  101.84076,  110.47654,  104.14364,  94.64428,  98.38645,  114.50658,  112.2037,  110.47654,  118.82446,  114.50658,  107.31009,  104.14364,  100.97719,  120.26376,  104.14364,  102.12862,  104.431496,  109.03725,  104.71935,  106.15865,  108.74939,  109.03725,  107.31009,  94.64428,  101.265045,  118.24874,  104.71935,  106.15865,  107.31009,  114.21871,  105.00722,  107.31009,  109.90082,  111.627975,  109.61296,  101.5529,  105.58293,  116.23373,  109.61296,  104.431496,  107.02223,  115.08229,  102.12862,  102.12862,  107.8858,  118.24874,  109.90082,  105.58293,  107.597946,  119.688034,  108.461525,  108.461525,  104.14364,  109.03725,  110.764404,  102.70434,  107.02223,  119.11232,  102.70434,  100.1136,  110.764404,  111.34012,  104.431496,  102.70434,  111.627975,  112.77942,  112.77942,  104.14364,  109.90082,  121.70306,  110.47654,  107.31009,  105.00722,  116.23373,  111.34012,  106.44651,  112.2037,  113.930855,  114.21871,  107.597946,  111.05226,  115.94587,  108.461525,  104.71935,  107.8858,  117.960884,  106.44651,  101.5529,  106.44651,  112.77942,  103.855774,  111.34012,  112.2037,  115.94587,  106.73437,  101.84076,  109.03725,  115.658005,  107.02223,  104.71935,  105.295074,  114.50658,  102.9922,  102.41648,  106.73437,  118.24874,  102.12862,  97.81073,  94.356415,  109.3251,  105.295074,  97.52287,  100.68932,  113.64299,  99.53789,  101.265045,  106.15865,  115.94587,  113.930855,  102.12862,  106.44651,  112.49156,  98.38645,  96.37144,  94.64428,  112.77942,  105.00722,  100.40147,  94.64428,  111.05226,  103.855774,  100.68932,  107.31009,  111.91583,  103.56792,  90.90211,  94.06856,  110.18868,  100.1136,  102.41648,  101.5529,  112.49156,  96.37144,  92.05354,  98.09859,  112.2037,  98.67431,  100.68932,  100.97719,  115.37015,  100.97719,  102.41648,  111.627975,  126.02094,  108.74939,  104.71935,  109.61296,  113.64299,  105.295074,  95.50786,  96.37144,  112.77942,  95.22,  93.49284,  95.22,  111.627975,  98.962166,  100.40147,  100.97719,  113.067276,  94.06856,  98.09859,  101.84076,  112.2037,  104.431496,  93.7807,  96.94715,  112.49156,  107.597946,  99.825745,  97.52287,  115.08229,  112.2037,  103.28006,  103.56792,  113.067276,  100.1136,  103.855774,  108.461525,  111.91583,  102.70434,  98.962166,  112.77942,  110.47654,  107.31009,  100.68932,  105.87079,  119.40018,  107.31009,  107.597946,  111.05226,  113.35513,  111.91583,  110.18868,  109.90082,  124.86951,  108.17367,  107.02223,  107.31009,  117.38516,  110.18868,  105.58293,  100.68932,  111.05226,  105.295074,  102.9922,  107.31009,  121.41519,  109.03725,  102.12862,  106.73437,  110.18868,  107.31009,  98.67431,  105.58293,  115.08229,  105.295074,  101.5529,  100.68932,  113.930855,  99.825745,  99.25003,  99.25003,  113.64299,  101.84076,  102.41648,  100.68932,  111.05226,  108.74939,  99.25003,  105.87079,  116.52159,  97.235016,  101.265045,  106.44651,  110.764404,  99.53789,  100.97719,  107.8858,  111.627975,  112.77942,  100.97719,  106.73437,  112.49156,  105.00722,  94.06856,  98.962166,  113.64299,  107.02223,  100.97719,  104.431496,  114.79443,  99.53789,  102.12862,  104.14364,  110.18868,  100.1136,  94.64428,  102.9922,  108.17367,  102.9922,  101.84076,  98.38645,  111.05226,  94.64428,  99.25003,  98.67431,  110.764404,  105.87079,  98.67431,  101.265045,  110.764404,  100.40147,  101.5529,  104.14364,  113.930855,  100.68932,  98.67431,  102.70434,  106.73437,  101.265045,  98.67431,  104.14364,  110.18868,  100.1136,  93.49284,  98.67431,  109.3251,  100.97719,  97.52287,  98.09859,  107.31009,  95.50786,  88.88709,  96.37144,  110.18868,  91.47783,  92.05354,  101.5529,  114.79443,  108.74939,  96.94715,  102.70434,  111.627975,  101.265045,  95.795715,  95.795715,  105.00722,  91.765686,  89.462814,  90.90211,  105.58293,  96.659294,  94.06856,  102.12862,  109.61296,  100.68932,  96.94715,  96.08357,  105.87079,  89.75067,  94.356415,  99.53789,  103.855774,  100.1136,  92.3414,  93.49284,  109.03725,  89.462814,  86.0085,  95.50786,  109.3251,  92.629265,  92.05354,  88.599236,  105.58293,  92.05354,  87.159935,  87.73566,  103.28006,  90.90211,  91.47783,  90.03853,  110.47654,  96.94715,  92.91712,  90.03853,  108.461525,  90.03853,  86.58422,  93.20499,  103.56792,  99.25003,  95.795715,  88.88709,  104.14364,  92.3414,  89.17495,  96.659294,  101.84076,  88.88709,  84.5692,  90.03853,  103.855774,  88.02351,  88.31137,  88.88709,  106.44651,  86.0085,  86.29636,  87.4478,  99.53789,  89.462814,  86.58422,  84.85706,  96.37144,  83.993484,  85.14492,  93.7807,  98.962166,  82.26633,  81.69061,  82.26633,  98.67431,  85.14492,  82.26633,  84.5692,  97.81073,  83.70563,  83.70563,  81.69061,  100.40147,  83.41776,  80.25131,  79.67559,  100.40147,  83.70563,  79.963455,  85.14492,  96.08357,  80.53917,  88.02351,  95.795715,  101.84076,  94.93214,  89.17495,  91.189964,  93.20499,  84.85706,  77.94844,  87.159935,  94.06856,  77.94844,  75.933426,  82.26633,  92.3414,  88.599236,  82.84205,  83.70563,  96.94715,  85.14492,  80.53917,  81.11489,  91.47783,  79.09988,  77.94844,  75.357704,  89.462814,  85.43278,  82.84205,  81.11489,  97.235016,  80.25131,  79.09988,  79.09988,  86.29636,  79.38773,  77.37272,  78.81202,  91.47783,  82.84205,  80.827034,  83.70563,  90.90211,  85.43278,  78.2363,  77.08486,  90.326385,  82.26633,  76.797,  76.22128,  85.72064,  84.28134,  77.08486,  86.29636,  88.31137,  75.357704,  77.660576,  75.933426,  89.462814,  76.50914,  77.08486,  76.22128,  86.87208,  78.2363,  76.22128,  76.50914,  81.40275,  75.64556,  75.933426,  75.64556,  82.84205,  76.797,  75.64556,  83.129906,  91.47783,  82.26633,  80.25131,  79.38773,  82.554184,  78.2363,  76.50914,  76.22128,  77.37272,  76.50914,  76.22128,  77.94844,  76.50914,  76.22128,  75.933426,  77.94844,  77.37272,  76.797,  76.22128,  76.50914,  80.25131,  76.22128,  76.22128,  76.22128,  77.08486,  75.933426,  76.22128,  77.660576]
    tol:int = 2
    x_test = np.array(test).reshape(1,-1)
    x_test = np.rint(x_test)
    x_test_mean = np.mean(x_test, axis=1)
    x_test_std = np.std(x_test, axis=1)
    print(x_test.min())
    print(np.unique(x_test))

    print(x_test_mean)
    print(x_test_std)

    num_bins = 'auto'
    print("x_test: ", x_test)
    _ = plt.hist(x_test[0], num_bins, facecolor='blue')
    plt.title("Histogram with 'auto' bins")
    plt.show()

    x_axis = np.arange(x_test.min(), x_test.max(), 0.1)
    y = norm.pdf(x_axis, x_test_mean[0], x_test_std[0])
    plt.plot(x_axis, y, label='normal distr')

    tol:float = 31.5
    scrap_rate = 1 - (norm.cdf(x_test_mean+tol, x_test_mean, x_test_std) - 0.5) *2
    print("scrap_rate: ", scrap_rate)
    plt.legend()
    plt.show()


